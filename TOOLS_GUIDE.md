# ğŸ› ï¸ ä¾¿æºå¼å·¥å…·åŒ…ä½¿ç”¨æŒ‡å—

## ğŸ“¦ å·¥å…·æ¦‚è§ˆ

æœ¬é¡¹ç›®æä¾›äº†å®Œæ•´çš„ä¾¿æºå¼éƒ¨ç½²å·¥å…·ï¼Œè§£å†³"å¸¦å‡ºå»ç”¨å°±å‡ºé—®é¢˜"çš„æ‰€æœ‰åœºæ™¯ã€‚

---

## ğŸš€ æ ¸å¿ƒå·¥å…·ï¼ˆ3ä¸ªå¿…å¤‡ï¼‰

### 1. `run.sh` - ä¸€é”®å¯åŠ¨ â­â­â­â­â­

**æœ€é‡è¦çš„å·¥å…·ï¼90%çš„æƒ…å†µåªéœ€è¦è¿™ä¸€ä¸ªå‘½ä»¤ã€‚**

```bash
./run.sh                           # å¯åŠ¨é»˜è®¤ç¨‹åº
./run.sh person_detect.py          # å¯åŠ¨æŒ‡å®šç¨‹åº
```

**åŠŸèƒ½:**
- âœ“ è‡ªåŠ¨è®¾ç½® LD_LIBRARY_PATH å’Œ PYTHONPATH
- âœ“ æ£€æŸ¥å¹¶ä¿®å¤ USB æƒé™
- âœ“ æ¸…ç†å†²çªè¿›ç¨‹
- âœ“ éªŒè¯ Python ä¾èµ–
- âœ“ å¯åŠ¨ç¨‹åº

**é€‚ç”¨åœºæ™¯:**
- æ¯æ¬¡å¯åŠ¨ç¨‹åº
- æ¢åˆ°æ–°ç¯å¢ƒ
- é‡åˆ°æƒé™é—®é¢˜
- ç¯å¢ƒå˜é‡ä¸¢å¤±

---

### 2. `portable_check.sh` - ç¯å¢ƒè¯Šæ–­

**é‡åˆ°é—®é¢˜æ—¶ç¬¬ä¸€ä¸ªè¿è¡Œçš„å·¥å…·ã€‚**

```bash
./portable_check.sh
```

**æ£€æŸ¥é¡¹ç›®ï¼ˆ10å¤§ç±»ï¼‰:**
1. åŸºç¡€ç¯å¢ƒï¼ˆOSã€Pythonï¼‰
2. Python ä¾èµ–
3. å…³é”®æ–‡ä»¶
4. USB è®¾å¤‡
5. ç”¨æˆ·ç»„æƒé™
6. udev è§„åˆ™
7. åŠ¨æ€åº“è·¯å¾„
8. è¿›ç¨‹å†²çª
9. ç¡¬ä»¶åŠ é€Ÿ
10. ç³»ç»Ÿèµ„æº

**è¾“å‡ºç¤ºä¾‹:**
```
âœ“ ç¯å¢ƒå®Œç¾ï¼å¯ä»¥æ­£å¸¸è¿è¡Œ
æˆ–
âœ— å‘ç° 2 ä¸ªä¸¥é‡é—®é¢˜ + 3 ä¸ªè­¦å‘Š
  ï¼ˆå¹¶ç»™å‡ºä¿®å¤å»ºè®®ï¼‰
```

**é€‚ç”¨åœºæ™¯:**
- ç¨‹åºæ— æ³•å¯åŠ¨
- æ¢åˆ°æ–°æœºå™¨
- æ€§èƒ½å¼‚å¸¸
- å®šæœŸæ£€æŸ¥

---

### 3. `fix_camera_permission.sh` - USB æƒé™ä¿®å¤

**ä¸“é—¨è§£å†³æ‘„åƒå¤´æƒé™é—®é¢˜ã€‚**

```bash
./fix_camera_permission.sh
```

**åŠŸèƒ½:**
- æ£€æµ‹ Berxel æ‘„åƒå¤´
- æ˜¾ç¤ºå½“å‰æƒé™çŠ¶æ€
- æä¾›5ç§ä¿®å¤æ–¹æ¡ˆ
- å¯é€‰è‡ªåŠ¨ä¿®å¤

**é€‚ç”¨åœºæ™¯:**
- é”™è¯¯ç  -6
- æ‘„åƒå¤´æ‰“å¼€å¤±è´¥
- æ¢ USB ç«¯å£å

---

## ğŸ”§ è¾…åŠ©å·¥å…·ï¼ˆ4ä¸ªå¯é€‰ï¼‰

### 4. `save_environment.sh` - ç¯å¢ƒå¿«ç…§

**ä¿å­˜å½“å‰å·¥ä½œé…ç½®ï¼Œç”¨äºå¯¹æ¯”å’Œæ¢å¤ã€‚**

```bash
./save_environment.sh
```

**ç”Ÿæˆå†…å®¹:**
- ç³»ç»Ÿä¿¡æ¯
- Python ç¯å¢ƒ
- ç²¾ç¡®åŒ…ç‰ˆæœ¬ (requirements_exact.txt)
- ONNX Runtime é…ç½®
- ç¡¬ä»¶ä¿¡æ¯
- USB è®¾å¤‡
- ç”¨æˆ·æƒé™
- ç¯å¢ƒå˜é‡
- å®Œæ•´è¯Šæ–­æŠ¥å‘Š

**ç”Ÿæˆæ–‡ä»¶:**
```
environment_snapshot_20251014_123456/
  â”œâ”€â”€ system_info.txt
  â”œâ”€â”€ python_env.txt
  â”œâ”€â”€ requirements_exact.txt
  â”œâ”€â”€ onnxruntime_info.txt
  â”œâ”€â”€ hardware_info.txt
  â”œâ”€â”€ usb_devices.txt
  â”œâ”€â”€ user_permissions.txt
  â”œâ”€â”€ environment_vars.txt
  â””â”€â”€ diagnostic_report.txt

environment_snapshot_20251014_123456.tar.gz  (æ‰“åŒ…æ–‡ä»¶)
```

**ä½¿ç”¨åœºæ™¯:**
- åœ¨å·¥ä½œç¯å¢ƒä¿å­˜é…ç½®
- å¸¦åˆ°æ–°æœºå™¨å¯¹æ¯”å·®å¼‚
- é—®é¢˜æ’æŸ¥
- é…ç½®å¤‡ä»½

---

### 5. `demo_portable.sh` - äº¤äº’å¼æ¼”ç¤º

**å±•ç¤ºä¾¿æºå¼éƒ¨ç½²çš„å®Œæ•´æµç¨‹ã€‚**

```bash
./demo_portable.sh
```

**æ¼”ç¤ºå†…å®¹:**
1. è¿è¡Œç¯å¢ƒè¯Šæ–­
2. ä¸€é”®å¯åŠ¨ç¨‹åº
3. æ˜¾ç¤ºä½¿ç”¨æ€»ç»“

**é€‚ç”¨åœºæ™¯:**
- å­¦ä¹ å·¥å…·ä½¿ç”¨
- æ¼”ç¤ºç»™å›¢é˜Ÿ
- åŸ¹è®­æ–°æˆå‘˜

---

### 6. `install_accelerated_backends.sh` - åç«¯å®‰è£…å‘å¯¼

**æ£€æµ‹ç¡¬ä»¶å¹¶æ¨èæœ€ä½³åŠ é€Ÿåç«¯ã€‚**

```bash
./install_accelerated_backends.sh
```

**åŠŸèƒ½:**
- è‡ªåŠ¨æ£€æµ‹ CPU/GPU ç±»å‹
- æ¨èæœ€ä½³åç«¯ï¼ˆOpenVINO/ROCm/CUDAï¼‰
- ç»™å‡ºå®‰è£…å‘½ä»¤
- æ€§èƒ½é¢„ä¼°

**é€‚ç”¨åœºæ™¯:**
- æ€§èƒ½ä¼˜åŒ–
- å®‰è£…åŠ é€Ÿåç«¯
- ç¡¬ä»¶å‡çº§å

---

### 7. `compare_versions.py` - ç‰ˆæœ¬å¯¹æ¯”

**è‡ªåŠ¨å¯¹æ¯”ä¸¤ä¸ªç‰ˆæœ¬çš„æ€§èƒ½å·®å¼‚ã€‚**

```bash
python3 compare_versions.py
```

**åŠŸèƒ½:**
- è‡ªåŠ¨è¿è¡Œä¸¤ä¸ªç‰ˆæœ¬ï¼ˆå„30ç§’ï¼‰
- æ”¶é›† FPS æ•°æ®
- ç”Ÿæˆå¯¹æ¯”æŠ¥å‘Š

**è¾“å‡ºç¤ºä¾‹:**
```
ğŸ“Š æ€§èƒ½å¯¹æ¯”æŠ¥å‘Š
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
æŒ‡æ ‡          åŸç‰ˆ      ä¼˜åŒ–ç‰ˆ     å·®å¼‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å¹³å‡FPS      28.5      32.1     +12.6%
æœ€å°FPS      25.2      28.4     +12.7%
æœ€å¤§FPS      31.8      35.6     +11.9%
```

**é€‚ç”¨åœºæ™¯:**
- éªŒè¯ä¼˜åŒ–æ•ˆæœ
- æ€§èƒ½æµ‹è¯•
- ç‰ˆæœ¬é€‰æ‹©

---

## ğŸ“Š æ€§èƒ½åˆ†æå·¥å…·ï¼ˆ3ä¸ªï¼‰

### 8. `profile_performance.py` - æ€§èƒ½å‰–æ

```bash
python3 profile_performance.py
```

åˆ†æå„ç»„ä»¶è€—æ—¶ï¼Œæ‰¾å‡ºæ€§èƒ½ç“¶é¢ˆã€‚

### 9. `test_onnx_performance.py` - ONNX åŸºå‡†æµ‹è¯•

```bash
python3 test_onnx_performance.py
```

æµ‹è¯• ONNX æ¨ç†æ€§èƒ½ã€‚

### 10. `benchmark_*.py` - å„ç§åŸºå‡†æµ‹è¯•

æµ‹è¯•ä¸åŒé…ç½®çš„æ€§èƒ½è¡¨ç°ã€‚

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯å¿«é€Ÿç´¢å¼•

### åœºæ™¯1: æ¯å¤©æ­£å¸¸ä½¿ç”¨

```bash
cd /home/zhuo-skadi/Documents/ros2-robt
./run.sh
```

**å°±è¿™ä¹ˆç®€å•ï¼**

---

### åœºæ™¯2: ç¨‹åºæ— æ³•å¯åŠ¨

```bash
# 1. è¯Šæ–­é—®é¢˜
./portable_check.sh

# 2. æŒ‰æç¤ºä¿®å¤
# ...

# 3. é‡æ–°å¯åŠ¨
./run.sh
```

---

### åœºæ™¯3: æ‘„åƒå¤´é”™è¯¯ç  -6

```bash
# æ–¹æ¡ˆA: ä½¿ç”¨ä¿®å¤è„šæœ¬
./fix_camera_permission.sh

# æ–¹æ¡ˆB: ä½¿ç”¨ä¸€é”®å¯åŠ¨ï¼ˆè‡ªåŠ¨ä¿®å¤ï¼‰
./run.sh

# æ–¹æ¡ˆC: æ‰‹åŠ¨ä¿®å¤
pkill -9 -f person_detect
sudo chmod 666 /dev/bus/usb/001/005
```

---

### åœºæ™¯4: å¸¦åˆ°æ–°æœºå™¨

```bash
# æ­¥éª¤1: åœ¨åŸæœºå™¨ä¿å­˜ç¯å¢ƒ
./save_environment.sh
# ä¼šç”Ÿæˆ environment_snapshot_XXX.tar.gz

# æ­¥éª¤2: å¤åˆ¶æ–‡ä»¶åˆ°æ–°æœºå™¨
scp environment_snapshot_XXX.tar.gz user@newhost:~/
scp ros2-robt.tar.gz user@newhost:~/

# æ­¥éª¤3: åœ¨æ–°æœºå™¨ä¸Š
tar -xzf ros2-robt.tar.gz
cd ros2-robt
pip install -r requirements.txt

# æ­¥éª¤4: è¯Šæ–­å’Œå¯åŠ¨
./portable_check.sh
./run.sh
```

---

### åœºæ™¯5: æ¯”èµ›ç°åœºï¼ˆä¸´æ—¶æœºå™¨ï¼‰

```bash
# å¿«é€Ÿéƒ¨ç½²3æ­¥èµ°
cd ros2-robt
./portable_check.sh  # å¿«é€Ÿè¯Šæ–­
./run.sh             # è‡ªåŠ¨ä¿®å¤å¹¶å¯åŠ¨

# å¦‚æœæ²¡æœ‰ sudo æƒé™ï¼Œè®©ç®¡ç†å‘˜è¿è¡Œï¼š
sudo chmod 666 /dev/bus/usb/001/005
```

---

### åœºæ™¯6: æ€§èƒ½ä¼˜åŒ–

```bash
# 1. å®‰è£…åŠ é€Ÿåç«¯
./install_accelerated_backends.sh  # æŸ¥çœ‹æ¨è
pip install onnxruntime-openvino   # Intel/AMD é€šç”¨

# 2. æ€§èƒ½åˆ†æ
python3 profile_performance.py

# 3. ç‰ˆæœ¬å¯¹æ¯”
python3 compare_versions.py

# 4. éªŒè¯æå‡
./run.sh
# è§‚å¯Ÿ FPS å˜åŒ–
```

---

### åœºæ™¯7: ç¯å¢ƒå¯¹æ¯”å’Œè°ƒè¯•

```bash
# åœ¨å·¥ä½œæœºå™¨
./save_environment.sh

# åœ¨é—®é¢˜æœºå™¨
./portable_check.sh > problem_env.txt

# å¯¹æ¯”å·®å¼‚
diff environment_snapshot_XXX/diagnostic_report.txt problem_env.txt
```

---

## ğŸ“š æ–‡æ¡£é€ŸæŸ¥

| æ–‡æ¡£ | ç”¨é€” | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| **QUICK_REFERENCE.txt** | å¿«é€Ÿå‚è€ƒå¡ç‰‡ | æ‰“å°éšèº«æºå¸¦ |
| **PORTABLE_SOLUTION.md** | å®Œæ•´è§£å†³æ–¹æ¡ˆ | è¯¦ç»†äº†è§£åŸç† |
| **TROUBLESHOOTING.md** | æ•…éšœæ’æŸ¥æ‰‹å†Œ | é‡åˆ°å…·ä½“é—®é¢˜ |
| **QUICKSTART_OPTIMIZED.md** | å¿«é€Ÿå¼€å§‹æŒ‡å— | æ–°æ‰‹å…¥é—¨ |
| **OPTIMIZATION_COMPLETE_V2.md** | ä¼˜åŒ–æŠ¥å‘Š | äº†è§£ä¼˜åŒ–ç»†èŠ‚ |

---

## âš¡ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# æ—¥å¸¸ä½¿ç”¨
./run.sh                                    # å¯åŠ¨ç¨‹åº

# é—®é¢˜è¯Šæ–­
./portable_check.sh                         # ç¯å¢ƒè¯Šæ–­
./fix_camera_permission.sh                  # ä¿®å¤æƒé™

# ç¯å¢ƒç®¡ç†
./save_environment.sh                       # ä¿å­˜å¿«ç…§
pip freeze > requirements_exact.txt         # ä¿å­˜åŒ…ç‰ˆæœ¬

# æ€§èƒ½ä¼˜åŒ–
pip install onnxruntime-openvino           # å®‰è£…åŠ é€Ÿ
python3 profile_performance.py             # æ€§èƒ½åˆ†æ
python3 compare_versions.py                # ç‰ˆæœ¬å¯¹æ¯”

# åº”æ€¥ä¿®å¤
pkill -9 -f person_detect                  # æ€è¿›ç¨‹
sudo chmod 666 /dev/bus/usb/001/XXX        # ä¿®æƒé™
export LD_LIBRARY_PATH=$(pwd)/libs:$LD_LIBRARY_PATH  # è®¾ç¯å¢ƒ
```

---

## ğŸ“ æœ€ä½³å®è·µ

### 1. å…»æˆå¥½ä¹ æƒ¯

```bash
# âœ… æ¨è
cd /path/to/ros2-robt
./run.sh

# âŒ ä¸æ¨è
cd ~
python3 /path/to/person_detect.py  # å¯èƒ½æ‰¾ä¸åˆ°æ–‡ä»¶
sudo python3 person_detect.py      # ä½¿ç”¨ç³»ç»ŸPython
```

### 2. å®šæœŸä¿å­˜ç¯å¢ƒå¿«ç…§

```bash
# æ¯æ¬¡é‡å¤§æ›´æ–°å
./save_environment.sh

# ä¿å­˜åˆ°äº‘ç«¯æˆ–å¤‡ä»½ç›˜
cp environment_snapshot_*.tar.gz ~/Backup/
```

### 3. ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# æ¯æ¬¡ä½¿ç”¨
source venv/bin/activate
./run.sh
```

### 4. æ‰“å°å¿«é€Ÿå‚è€ƒ

```bash
# æ‰“å°è¿™ä¸ªæ–‡ä»¶éšèº«æºå¸¦
cat QUICK_REFERENCE.txt
```

---

## ğŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

### ç¬¬ä¸€æ­¥ï¼šè¿è¡Œè¯Šæ–­
```bash
./portable_check.sh
```

### ç¬¬äºŒæ­¥ï¼šæŸ¥çœ‹æ–‡æ¡£
æ ¹æ®é—®é¢˜ç±»å‹æŸ¥çœ‹å¯¹åº”æ–‡æ¡£ï¼š
- ç¯å¢ƒé—®é¢˜ â†’ PORTABLE_SOLUTION.md
- å…·ä½“é”™è¯¯ â†’ TROUBLESHOOTING.md
- æ€§èƒ½é—®é¢˜ â†’ OPTIMIZATION_COMPLETE_V2.md

### ç¬¬ä¸‰æ­¥ï¼šæ”¶é›†ä¿¡æ¯
```bash
./portable_check.sh > diag.txt
python3 person_detect.py > run.log 2>&1
tar -czf debug-info.tar.gz diag.txt run.log
```

---

## âœ¨ è®°ä½è¿™ä¸ª

**æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼ï¼š**

```bash
cd /home/zhuo-skadi/Documents/ros2-robt
./run.sh
```

**é‡åˆ°ä»»ä½•é—®é¢˜ï¼š**

```bash
./portable_check.sh  # è¯Šæ–­
./run.sh             # ä¿®å¤
```

**90%çš„é—®é¢˜éƒ½èƒ½é€šè¿‡è¿™ä¸¤ä¸ªå‘½ä»¤è§£å†³ï¼**

---

**åˆ¶ä½œæ—¥æœŸ**: 2025-10-14  
**ç‰ˆæœ¬**: v1.0  
**ç»´æŠ¤è€…**: Zhuo-RM Team
